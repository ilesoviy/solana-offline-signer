"use strict";(self["webpackChunkSolana_Offline_Signer"]=self["webpackChunkSolana_Offline_Signer"]||[]).push([[140],{1140:function(e,t,n){n.r(t),n.d(t,{default:function(){return F}});var o=n(6252);const c={class:"container mx-auto"};function a(e,t,n,a,i,r){const s=(0,o.up)("NonceAccountForm");return(0,o.wg)(),(0,o.iD)("div",c,[(0,o.Wm)(s)])}var i=n(3577);const r={class:"w-full"},s={class:"leading-loose p-7 bg-secondary-light dark:bg-secondary-dark rounded-xl shadow-xl text-left"},l={class:"flex justify-center my-4"},d={class:"text-white"},u={key:0},g={class:"text-white flex justify-end mr-2"},h=(0,o._)("label",{class:"block mb-2 text-lg text-primary-dark dark:text-primary-light"},"Mnemonic",-1),m={class:"flex justify-center my-4"},y={key:0,class:"text-white"},A=(0,o._)("div",{style:{"border-bottom":"1px dotted gray"}},null,-1),p=(0,o._)("div",{class:"text-white text-lg mt-2"},[(0,o._)("h1",null,"Signed Transaction:")],-1),b={style:{"word-break":"break-all"}},f={class:"flex justify-center"},v={key:1};function k(e,t,n,c,a,k){const w=(0,o.up)("FormInput"),x=(0,o.up)("Button"),I=(0,o.up)("qrcode-vue");return(0,o.wg)(),(0,o.iD)("div",r,[(0,o._)("div",s,[(0,o.Wm)(w,{label:"URL to broadcast",inputIdentifier:"URL to broadcast",val:e.URLtoBroadcast,readonly:""},null,8,["val"]),(0,o._)("div",l,[(0,o.Wm)(x,{title:"Create Nonce Account",class:"px-4 py-2.5 text-white tracking-wider bg-indigo-500 hover:bg-indigo-600 focus:ring-1 focus:ring-indigo-900 rounded-lg duration-500",type:"button","aria-label":"Create Nonce Account",onClick:k.createNonceAccount},null,8,["onClick"])]),(0,o._)("div",d,[1==e.IsRequested?((0,o.wg)(),(0,o.iD)("div",u,[(0,o.Wm)(w,{label:"Nonce Account",inputIdentifier:"Nonce Account",val:e.nonceAccountPublicKey,placeholder:"Type the Nonce Account",onInput:t[0]||(t[0]=e=>k.setNonceAccount(e))},null,8,["val"]),(0,o.Wm)(w,{label:"Destination Address",inputIdentifier:"Destination Address",val:e.destinationAddress,placeholder:"Unknown",onInput:t[1]||(t[1]=e=>k.setDestinationAddress(e))},null,8,["val"]),(0,o.Wm)(w,{label:"Amount (Lamports)",inputIdentifier:"",val:e.amount,placeholder:"Type the amount",onInput:t[2]||(t[2]=e=>k.setAmount(e))},null,8,["val"]),(0,o._)("div",g,(0,i.zw)(e.amount/10**9)+" SOL ",1),(0,o._)("div",null,[h,(0,o._)("input",{class:"text-white border border-gray-300 dark:border-primary-dark border-opacity-50 text-primary-dark dark:text-secondary-light bg-ternary-light dark:bg-ternary-dark rounded-md shadow-sm",type:"file",onChange:t[3]||(t[3]=(...e)=>k.onFileChange&&k.onFileChange(...e)),ref:"file"},null,544)]),(0,o.Wm)(w,{label:"Source Address",inputIdentifier:"Source Address",val:null!=e.sourceAddress?e.sourceAddress.publicKey:"",placeholder:"Type the Source Address"},null,8,["val"]),(0,o._)("div",m,[(0,o.Wm)(x,{title:"Create Transaction",class:"px-4 py-2.5 text-white tracking-wider bg-indigo-500 hover:bg-indigo-600 focus:ring-1 focus:ring-indigo-900 rounded-lg duration-500",type:"button","aria-label":"Get Recent Blockhash",onClick:k.createTransaction},null,8,["onClick"])]),1==e.IsCreated?((0,o.wg)(),(0,o.iD)("div",y,[A,p,(0,o._)("div",b,(0,i.zw)(e.signedTx),1),(0,o._)("div",f,[(0,o.Wm)(I,{value:e.signedTx,size:"256"},null,8,["value"])])])):(0,o.kq)("",!0)])):((0,o.wg)(),(0,o.iD)("div",v," Nonce Account: None "))])])])}var w=n(5098),x=n(2040),I=n(9232),S=n(2153),K=n(7191),R=n(2678),P=n(5108),_={components:{Button:w.Z,FormInput:x.Z},data:()=>({URLtoBroadcast:void 0==localStorage.getItem("EndPointUrl")?"":localStorage.getItem("EndPointUrl"),IsRequested:!1,nonceAccount:null,destinationAddress:void 0==localStorage.getItem("DestinationAddress")?"":localStorage.getItem("DestinationAddress"),amount:void 0==localStorage.getItem("Amount")?"":localStorage.getItem("Amount"),mnemonic:"",sourceAddress:null,IsCreated:!1,signedTx:"",nonceAccountPublicKey:"",nonceAccountAuthSecretKey:""}),methods:{setNonceAccount(e){this.nonceAccountPublicKey=e.target.value},setDestinationAddress(e){this.destinationAddress=e.target.value,localStorage.setItem("DestinationAddress",this.destinationAddress)},setAmount(e){this.amount=e.target.value,localStorage.setItem("Amount",this.amount)},async getSourceAddressFromMnemonic(){try{const e=S.Z1(this.mnemonic,""),t="m/44'/501'/0'/0'",n=I.RG.fromSeed((0,R.derivePath)(t,e.toString("hex")).key);this.sourceAddress=n}catch(e){P.log(e)}},async createNonceAccount(){try{const e=new I.ew(this.URLtoBroadcast),t=44,n=I.RG.generate(),o=I.RG.generate();this.nonceAccount=I.RG.generate(),P.log(`nonce account: ${this.nonceAccount.publicKey.toBase58()}`);let c=(new I.YW).add(I.yc.createAccount({fromPubkey:n.publicKey,newAccountPubkey:this.nonceAccount.publicKey,lamports:await e.getMinimumBalanceForRentExemption(t),space:t,programId:I.yc.programId}),I.yc.nonceInitialize({noncePubkey:this.nonceAccount.publicKey,authorizedPubkey:this.nonceAccount.publicKey}));P.log(`txhash: ${await e.sendTransaction(c,[n,this.nonceAccount])}`),this.IsRequested=!0,this.nonceAccountPublicKey=this.nonceAccount.publicKey.toBase58(),this.nonceAccountAuthSecretKey=K.encode(o.secretKey)}catch(e){P.log(e)}},async createTransaction(){try{const e=I.RG.generate();P.log(this.nonceAccountAuthSecretKey);const t=I.RG.fromSecretKey(K.decode(this.nonceAccountAuthSecretKey)),n=new I.ew(this.URLtoBroadcast),o=new I.nh(this.nonceAccountPublicKey);let c=await n.getAccountInfo(o),a=I.tD.fromAccountData(c.data),i=(new I.YW).add(I.yc.nonceAdvance({noncePubkey:o,authorizedPubkey:t.publicKey}),I.yc.transfer({fromPubkey:e.publicKey,toPubkey:t.publicKey,lamports:this.amount}));i.recentBlockhash=a.nonce,i.feePayer=e.publicKey,i.sign(e,t),this.IsCreated=!0,this.signedTx=i.serialize().toString("base64"),localStorage.setItem("SignedTx",this.signedTx)}catch(e){P.log(e)}},onFileChange(e){const t=e.target.files[0];if(t){const e=new FileReader;e.onload=()=>{this.mnemonic=e.result,this.getSourceAddressFromMnemonic()},e.readAsText(t)}}}},C=n(3744);const T=(0,C.Z)(_,[["render",k]]);var D=T,N={components:{NonceAccountForm:D}};const B=(0,C.Z)(N,[["render",a]]);var F=B}}]);
//# sourceMappingURL=140.30ec6b97.js.map